{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///D:/Project/logistic-app/pages/admin/drivers.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { \r\n  Modal, \r\n  Box, \r\n  Typography, \r\n  TextField, \r\n  Button, \r\n  Grid,\r\n  CircularProgress,\r\n  Alert,\r\n  Select, \r\n  MenuItem, \r\n  InputLabel, \r\n  FormControl \r\n} from '@mui/material';\r\nimport { useForm, SubmitHandler, Controller } from 'react-hook-form';\r\n\r\n// (ده الشكل الكامل للفورم)\r\ntype DriverFormInputs = {\r\n  name: string;\r\n  email: string;\r\n  password?: string;\r\n  phone: string | null;\r\n  licenseNumber: string;\r\n  status: string;\r\n  availability: string;\r\n};\r\n\r\ninterface DriverFormModalProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  onSubmit: (data: Partial<DriverFormInputs>) => Promise<void>; \r\n  defaultValues?: Partial<DriverFormInputs> | null; \r\n  isEditMode: boolean;\r\n  loading: boolean;\r\n  error: string | null;\r\n}\r\n\r\n// (الـ style بتاع المودال)\r\nconst style = {\r\n  position: 'absolute' as 'absolute',\r\n  top: '50%',\r\n  left: '50%',\r\n  transform: 'translate(-50%, -50%)',\r\n  width: 400,\r\n  bgcolor: 'background.paper',\r\n  boxShadow: 24,\r\n  p: 4,\r\n  maxHeight: '90vh', // (عشان المودال ميبقاش طويل أوي)\r\n  overflowY: 'auto' // (عشان نقدر نعمل سكرول لو المودال طويل)\r\n};\r\n\r\nconst DriverFormModal: React.FC<DriverFormModalProps> = ({ \r\n  open, \r\n  onClose, \r\n  onSubmit, \r\n  defaultValues, \r\n  isEditMode,\r\n  loading,\r\n  error\r\n}) => {\r\n  \r\n  const { register, handleSubmit, reset, control, formState: { errors } } = useForm<DriverFormInputs>();\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      if (isEditMode && defaultValues) {\r\n        reset(defaultValues);\r\n      } else {\r\n        reset({\r\n          name: '',\r\n          email: '',\r\n          password: '',\r\n          phone: '',\r\n          licenseNumber: '',\r\n          status: 'Active',\r\n          availability: 'Available'\r\n        }); \r\n      }\r\n    }\r\n  }, [open, isEditMode, defaultValues, reset]);\r\n\r\n  const handleFormSubmit: SubmitHandler<DriverFormInputs> = (data) => {\r\n    onSubmit(data);\r\n  };\r\n\r\n  return (\r\n    <Modal open={open} onClose={onClose}>\r\n      <Box sx={style}>\r\n        <Typography variant=\"h6\" component=\"h2\">\r\n          {isEditMode ? 'Edit Driver' : 'Add New Driver'}\r\n        </Typography>\r\n        \r\n        <Box component=\"form\" onSubmit={handleSubmit(handleFormSubmit)} noValidate sx={{ mt: 2 }}>\r\n          {/* @ts-ignore */}\r\n          <Grid container spacing={2}>\r\n            {/* @ts-ignore */}\r\n            <Grid item xs={12}>\r\n               <TextField\r\n                required\r\n                fullWidth\r\n                label=\"Full Name\"\r\n                {...register(\"name\", { required: \"Name is required\" })}\r\n                error={!!errors.name}\r\n                helperText={errors.name?.message}\r\n              />\r\n            </Grid>\r\n            {/* @ts-ignore */}\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                required\r\n                fullWidth\r\n                label=\"Email Address\"\r\n                type=\"email\"\r\n                disabled={isEditMode}\r\n                {...register(\"email\", { required: \"Email is required\" })}\r\n                error={!!errors.email}\r\n                helperText={errors.email?.message}\r\n              />\r\n            </Grid>\r\n            \r\n            {!isEditMode && (\r\n              <>\r\n                {/* @ts-ignore */}\r\n                <Grid item xs={12}>\r\n                  <TextField\r\n                    required\r\n                    fullWidth\r\n                    label=\"Password\"\r\n                    type=\"password\"\r\n                    {...register(\"password\", { required: \"Password is required\" })}\r\n                    error={!!errors.password}\r\n                    helperText={errors.password?.message}\r\n                  />\r\n                </Grid>\r\n              </>\r\n            )}\r\n            \r\n            {/* @ts-ignore */}\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Phone\"\r\n                {...register(\"phone\")}\r\n              />\r\n            </Grid>\r\n            {/* @ts-ignore */}\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                required\r\n                fullWidth\r\n                label=\"License Number\"\r\n                {...register(\"licenseNumber\", { required: \"License is required\" })}\r\n                error={!!errors.licenseNumber}\r\n                helperText={errors.licenseNumber?.message}\r\n              />\r\n            </Grid>\r\n            \r\n            {isEditMode && (\r\n              <>\r\n                {/* @ts-ignore */}\r\n                <Grid item xs={12} sm={6}>\r\n                  <FormControl fullWidth>\r\n                    <InputLabel id=\"status-label\">Status</InputLabel>\r\n                    <Controller\r\n                      name=\"status\"\r\n                      control={control}\r\n                      defaultValue=\"Active\" // (قيمة افتراضية)\r\n                      render={({ field }) => (\r\n                        <Select labelId=\"status-label\" {...field}>\r\n                          <MenuItem value=\"Active\">Active</MenuItem>\r\n                          <MenuItem value=\"On Leave\">On Leave</MenuItem>\r\n                          <MenuItem value=\"Suspended\">Suspended</MenuItem>\r\n                        </Select>\r\n                      )}\r\n                    />\r\n                  </FormControl>\r\n                </Grid>\r\n\r\n                {/* @ts-ignore */}\r\n                <Grid item xs={12} sm={6}>\r\n                   <FormControl fullWidth>\r\n                    <InputLabel id=\"availability-label\">Availability</InputLabel>\r\n                    <Controller\r\n                      name=\"availability\"\r\n                      control={control}\r\n                      defaultValue=\"Available\" // (قيمة افتراضية)\r\n                      render={({ field }) => (\r\n                        <Select labelId=\"availability-label\" {...field}>\r\n                          <MenuItem value=\"Available\">Available</MenuItem>\r\n                          <MenuItem value=\"Unavailable\">Unavailable</MenuItem>\r\n                        </Select>\r\n                      )}\r\n                    />\r\n                  </FormControl>\r\n                </Grid>\r\n              </>\r\n            )}\r\n\r\n            {error && (\r\n              <>\r\n                {/* @ts-ignore */}\r\n                <Grid item xs={12}>\r\n                  <Alert severity=\"error\">{error}</Alert>\r\n                </Grid>\r\n              </>\r\n            )}\r\n            \r\n            {/* @ts-ignore */}\r\n            <Grid item xs={12}>\r\n              <Button type=\"submit\" fullWidth variant=\"contained\" disabled={loading}>\r\n                {loading ? <CircularProgress size={24} /> : (isEditMode ? 'Save Changes' : 'Add Driver')}\r\n              </Button>\r\n            </Grid>\r\n          </Grid>\r\n        </Box>\r\n      </Box>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default DriverFormModal;"],"names":[],"mappings":"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","debugId":null}}]
}